<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diseño de PCB 6 Capas - Sistema de Control Satelital Analógico - Simón Aulet</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="container">
        <header>
            <h1>Diseño de PCB 6 Capas - Sistema de Control Satelital Analógico</h1>
            <p class="subtitle">Simón Aulet · KiCad · LTSpice · Diseño Analógico · PCB Multilayer</p>
            <p class="description">Diseño integral en KiCad de un sistema de control satelital analógico implementado con componentes discretos. Incluye simulación en LTSpice de etapas críticas: comparadores con histéresis, latches analógicos, temporizadores y conmutación de fuentes.</p>
            <div class="tech-tags">
                <span>KiCad</span>
                <span>LTSpice</span>
                <span>PCB 6 Capas</span>
                <span>Diseño Analógico</span>
                <span>Simulación</span>
                <span>Control Satelital</span>
            </div>
            <div class="navigation">
                <a href="index.html" class="nav-link">← Volver al Portafolio Principal</a>
            </div>
        </header>

        <main>
            <div class="content-wrapper">
                <h2>Diseño de PCB 6 capas para Sistema de Control Satelital Analógico</h2>

                <div style="text-align: center; margin: 30px 0;">
                    <img src="img/pcb.0.3Dboard1.png" alt="PCB Principal Renderizado" style="max-width: 100%; border: 2px solid #003366;">
                    <p style="text-align: center; font-style: italic; color: #555; margin-top: 10px;">Render 3D del PCB principal - el cerebro analógico del sistema de control satelital</p>
                </div>

                <h3>Contexto</h3>
                <p>Desarrollo grupal de un sistema de control satelital analógico implementado con componentes discretos. El sistema integra detección de orientación mediante fotoresistencias, sensado térmico, generación de PWM analógica, posicionamiento de servomotor, circuitos de timing, latches analógicos y lógica de control autónoma.</p>

                <h3>Mi Contribución</h3>
                <p><strong>Diseño integral en KiCad:</strong> Integración y desarrollo físico del sistema a partir de los módulos implementados en el laboratorio. Esto implica la creación del esquemático unificado en KiCad, selección estratégica de componentes compatibles con el montaje industrial, gestión de footprints y modelos 3D, implementación de clases de diseño para separación de señales (analógicas, digitales, potencia), routing crítico, y validación exhaustiva mediante ERC/DRC, culminando en un PCB de 6 capas listo para fabricación.</p>

                <p><strong>Simulación y validación analógica:</strong> Simulación en LTSpice de etapas clave: comparadores con histéresis (Schmitt trigger), generador de PWM analógico, circuitos de temporización, lógica de decisión para conmutación de fuentes vía relays, y latches implementados con transistores NPN.</p>

                <hr style="border: 1px solid #c41e3a; margin: 40px 0;" />

                <h2>Fase 1: La Arquitectura</h2>

                <h3>Sistema general</h3>
                <div style="text-align: center; margin: 30px 0;">
                    <img src="img/pcb.0.schematic_root.jpg" alt="Diagrama de Bloques del Sistema" style="max-width: 100%; border: 2px solid #003366;">
                    <p style="text-align: center; font-style: italic; color: #555; margin-top: 10px;">Hoja principal del esquemático - organizada como mapa de interconexiones entre subsistemas</p>
                </div>

                <p>El diseño se estructuró en <strong>6 subsheets modulares</strong>, cada uno encapsulando una función específica:</p>

                <ul style="margin-left: 20px; margin-bottom: 20px;">
                    <li><strong>Filtrado activo</strong> para acondicionamiento de señales de sensores LDR</li>
                    <li><strong>Sensado de orientación</strong> para detección eclipse/posición</li>
                    <li><strong>Control térmico</strong> con sensado LM35 y actuación</li>
                    <li><strong>Despliegue de paneles solares</strong> con control PWM y verificación</li>
                    <li><strong>Verificación de despliegue</strong> mediante temporizadores 555</li>
                    <li><strong>Selector de fuente</strong> para conmutación automática entre solar/batería</li>
                </ul>

                <p>La comunicación entre módulos se estableció mediante <strong>señales nombradas coherentemente</strong> usando prefijos. Por ejemplo <code>A_</code> → Señales analógicas sensibles, <code>C_</code> → Comandos y señales de control, <code>F_</code> → Realimentación, <code>L_</code> → Indicadores LED, etc. y sufijos para indicar entrada (<code>_I</code>) o salida (<code>_O</code>)</p>

                <h3>Planos Detallados</h3>
                <div style="margin: 30px 0; text-align: center;">
                    <iframe src="img/pcb.schematic.pdf" width="100%" height="600px" style="border: 2px solid #003366;">
                        <p>Tu navegador no soporta iframes. <a href="img/pcb.schematic.pdf">Descargar PDF</a></p>
                    </iframe>
                    <p style="text-align: center; font-style: italic; color: #555; margin-top: 10px;">Esquemáticos completos del sistema</p>
                </div>

                <h3>Selección de Componentes</h3>
                <p>Cada componente fue elegido considerando especificaciones eléctricas, disponibilidad, implicaciones de layout, y requerimientos térmicos/mecánicos. Se intentó usar todo del mismo fabricante (Texas Instruments) cuando fue posible:</p>

                <table>
                    <tr>
                        <th>Componente</th>
                        <th>Fabricante</th>
                        <th>Características Clave</th>
                        <th>Razón de Selección</th>
                    </tr>
                    <tr>
                        <td><strong>LM35</strong></td>
                        <td>Texas Instruments</td>
                        <td>Sensor de temperatura, TO-220</td>
                        <td>Permite atornillado directo a baterías/fuentes de calor para medición precisa</td>
                    </tr>
                    <tr>
                        <td><strong>LM358B</strong></td>
                        <td>Texas Instruments</td>
                        <td>Op-amp dual, SMD, 0.1µF en Vcc</td>
                        <td>Estabilidad demostrada, compensación integrada, paquete compacto</td>
                    </tr>
                    <tr>
                        <td><strong>CSD17577Q5A</strong></td>
                        <td>Texas Instruments</td>
                        <td>MOSFET N-ch, 25V, 6.7mΩ</td>
                        <td>Eficiencia en conmutación, baja Rds(on), optimo para relés</td>
                    </tr>
                    <tr>
                        <td><strong>RT314009</strong></td>
                        <td>TE Connectivity</td>
                        <td>Relay 9V/16A, 1 Forma C</td>
                        <td>Capacidad de corriente para conmutación de baterías, bobina compatible con 9V</td>
                    </tr>
                </table>

                <p><strong>Consideraciones de layout:</strong> Los encapsulados SMD se priorizaron para reducir inductancias parásitas, mientras que componentes como el LM35 en TO-220 ubicados en sensores externos permitieron montaje mecánico robusto donde se requería transferencia térmica directa.</p>

                <hr style="border: 1px solid #c41e3a; margin: 40px 0;" />

                <h2>Fase 2: Implementación Física - PCB de 6 Capas</h2>

                <h3>Estrategia de Stackup</h3>
                <p>La distribución en 6 capas se optimizó para garantizar integridad de señal y facilitar el debugging, con una separación clara de funciones:</p>

                <table>
                    <tr>
                        <th>Capa</th>
                        <th>Designación</th>
                        <th>Contenido Principal</th>
                        <th>Consideración Clave</th>
                    </tr>
                    <tr>
                        <td><strong>1</strong></td>
                        <td>F.Cu (Top)</td>
                        <td>Señales analógicas críticas</td>
                        <td>Accesible para medición, trazos cortos</td>
                    </tr>
                    <tr>
                        <td><strong>2</strong></td>
                        <td>In1.Cu</td>
                        <td>Plano de tierra contínuo</td>
                        <td>Referencia de baja impedancia</td>
                    </tr>
                    <tr>
                        <td><strong>3</strong></td>
                        <td>In2.Cu</td>
                        <td>Distribución de alimentación</td>
                        <td>Separación entre potencia limpia y general</td>
                    </tr>
                    <tr>
                        <td><strong>4</strong></td>
                        <td>In3.Cu</td>
                        <td>Señales de control y setpoints</td>
                        <td>Aislamiento de rutas analógicas</td>
                    </tr>
                    <tr>
                        <td><strong>5</strong></td>
                        <td>In4.Cu</td>
                        <td>Interconexiones y LEDs</td>
                        <td>Capa utilitaria</td>
                    </tr>
                    <tr>
                        <td><strong>6</strong></td>
                        <td>B.Cu (Bottom)</td>
                        <td>Rutas analógicas de largo recorrido</td>
                        <td>"Autopistas" con routing predecible</td>
                    </tr>
                </table>

                <h3>Visualización de Capas</h3>
                <div style="overflow-x: auto; margin: 30px 0; padding: 30px 0; background: #1a1a1a; border-radius: 8px;">
                  <div style="display: flex; gap: 20px; min-width: min-content; padding: 0 25px;">
                    <div style="flex-shrink: 0; width: 360px;">
                      <img src="img/pcb.0.board1.png" alt="Capas 1 y 2" style="width: 100%; border-radius: 4px;">
                      <p style="text-align: center; color: #ccc; font-size: 1.0em; margin-top: 8px;">F.Cu + In1.Cu</p>
                    </div>
                    <div style="flex-shrink: 0; width: 360px;">
                      <img src="img/pcb.0.board2.png" alt="Capas 3 y 4" style="width: 100%; border-radius: 4px;">
                      <p style="text-align: center; color: #ccc; font-size: 1.0em; margin-top: 8px;">In2.Cu + In3.Cu</p>
                    </div>
                    <div style="flex-shrink: 0; width: 360px;">
                      <img src="img/pcb.0.board3.png" alt="Capas 5 y 6" style="width: 100%; border-radius: 4px;">
                      <p style="text-align: center; color: #ccc; font-size: 1.0em; margin-top: 8px;">In4.Cu + B.Cu</p>
                    </div>
                    <div style="flex-shrink: 0; width: 360px;">
                      <img src="img/pcb.0.board4.png" alt="Sensores Externos" style="width: 100%; border-radius: 4px;">
                      <p style="text-align: center; color: #ccc; font-size: 1.0em; margin-top: 8px;">Módulos Sensoriales</p>
                    </div>
                  </div>
                </div>

                <h3>Metodología de Routing</h3>
                <p>El routing siguió una jerarquía estricta, priorizando integridad sobre conveniencia:</p>

                <ol style="margin-left: 20px; margin-bottom: 20px;">
                    <li><strong>Tierra</strong> - Establecimiento de referencia con múltiples vías</li>
                    <li><strong>Alimentación</strong> - Trazos dimensionados según corriente requerida. Se separa alimentación de integrados (<code>power_clean</code>) de alimentación general</li>
                    <li><strong>Señales de feedback</strong> - Rutas directas y protegidas</li>
                    <li><strong>Señales analógicas</strong> - Minimización de longitud y cruces</li>
                    <li><strong>Control y LEDs</strong> - Completado de interconexiones</li>
                </ol>

                <p>Esta secuencia aseguró que las señales más sensibles tuvieran rutas óptimas antes de comprometer espacio con funcionalidades secundarias.</p>

                <h3>Subsistemas Externos y Conectividad</h3>
                <div style="display: flex; flex-wrap: wrap; gap: 30px; margin: 30px 0; align-items: flex-start;">
                    <div style="flex: 1 1 300px; min-width: 300px;">
                        <img src="img/pcb.0.3Dboard4.png" alt="Módulos Sensoriales Externos" style="width: 100%; border: 2px solid #003366;">
                        <p style="text-align: center; font-style: italic; color: #555; margin-top: 10px;">Sensores y actuadores distribuidos - solución modular con conectividad claramente identificada</p>
                    </div>
                    <div style="flex: 1 1 300px; min-width: 300px;">
                        <p>El sistema completo se extiende más allá del PCB principal mediante módulos externos:</p>

                        <ul style="margin-left: 20px; margin-bottom: 20px;">
                            <li><strong>4 módulos de detección de luz</strong>, cada uno con 1 LDR para cobertura omnidireccional.</li>
                            <li><strong>2 sensores de temperatura LM35</strong> para monitoreo térmico en ubicaciones críticas.</li>
                            <li><strong>1 módulo heater</strong> activado por la señal de alerta de baja temperatura.</li>
                            <li><strong>2 finales de carrera</strong> para detección física de apertura y cierre de paneles solares.</li>
                        </ul>

                        <p>Cada módulo es un <strong>PCB cuadrado de doble capa</strong> con orificios para montaje mecánico robusto. La interconexión con el board principal se realiza mediante cables conectados a <strong>borneras rotuladas en ambos extremos</strong>, asegurando una instalación libre de errores y facilitando el mantenimiento o reemplazo individual de cualquier subsistema sin afectar al conjunto.</p>
                    </div>
                </div>
                <style>
                    @media (max-width: 768px) {
                        .content-wrapper div[style*="display: flex"] {
                            flex-direction: column !important;
                        }
                        .content-wrapper div[style*="min-width: 300px"] {
                            min-width: 100% !important;
                            margin-bottom: 20px;
                        }
                    }
                </style>

                <h3>Puntos Clave del Diseño</h3>
                <ul style="margin-left: 20px; margin-bottom: 20px;">
                    <li><strong>Separación efectiva de dominios:</strong> Las 63 señales organizadas en clases permitieron aplicar reglas de diseño consistentes y automatizadas.</li>
                    <li><strong>Routing jerárquico exitoso:</strong> Comenzar con referencia y alimentación, luego señales críticas, finalmente funcionalidades secundarias.</li>
                    <li><strong>Debugging incorporado:</strong> Todas las señales críticas accesibles en capas externas, con espacio para puntos de prueba donde fue necesario.</li>
                    <li><strong>Cumplimiento sobrado de especificaciones:</strong> El diseño final excede los requerimientos mínimos de clearance y ancho de trazo del fabricante seleccionado.</li>
                </ul>

                <hr style="border: 1px solid #c41e3a; margin: 40px 0;" />

                <h2>Simulación y Validación Analítica</h2>

                <p>Cada subsistema crítico del diseño se modeló y validó en LTSpice antes de cualquier implementación física. Partiendo de los requisitos funcionales —comparadores con histéresis, latches analógicos, temporizadores y generadores de PWM— se construyeron modelos utilizando componentes reales, como el opamp LM358 configurado según su datasheet de Texas Instruments, y señales PWL para simular condiciones operativas.</p>

                <p>Este proceso de simulación permitió optimizar valores de componentes, verificar márgenes de diseño y predecir el comportamiento del sistema con alta precisión. Los resultados luego se correlacionaron exitosamente con mediciones en protoboard utilizando un osciloscopio Tektronix de gama alta, estableciendo una base sólida para el diseño final del PCB.</p>

                <h3>1. Comparador con Histéresis (Schmitt Trigger)</h3>

                <p>La histéresis se implementó para eliminar oscilaciones en la conmutación ante señales con ruido o variaciones lentas. El circuito se modeló en LTSpice y se caracterizó tanto analítica como experimentalmente.</p>

                <div style="overflow-x: auto; margin: 30px 0; padding: 20px 0; background: #ffffff; border-radius: 8px;">
                  <div style="display: flex; gap: 20px; min-width: min-content; padding: 0 20px;">
                    <div style="flex-shrink: 0; width: 442px;">
                      <img src="img/pcb.1.1.circuit.png" alt="Circuito Schmitt Trigger en LTSpice" style="width: 100%; border-radius: 4px; border: 2px solid #003366;">
                      <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 8px;">Circuito implementado en LTSpice</p>
                    </div>
                    <div style="flex-shrink: 0; width: 442px;">
                      <img src="img/pcb.1.6.hysteresis_calculations.png" alt="Cálculo analítico de histéresis" style="width: 100%; border-radius: 4px; border: 2px solid #003366;">
                      <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 8px;">Cálculo analítico: H = 0.43 V</p>
                    </div>
                  </div>
                </div>

                <div style="margin: 30px 0; text-align: center;">
                  <img src="img/pcb.1.5.hysteresis_characteristics.png" alt="Medición de histéresis en simulación" style="max-width: 100%; border-radius: 6px; border: 2px solid #003366;">
                  <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 10px;">Validación en simulación: ΔV = 425 mV entre umbrales</p>
                </div>

                <p>La simulación con una rampa triangular confirma que la conmutación ocurre con una diferencia de 425 mV entre los flancos de subida y bajada, en excelente acuerdo con el cálculo teórico de 430 mV. Esto asegura inmunidad a ruido y estabilidad en la detección de umbrales.</p>

                <div style="overflow-x: auto; margin: 30px 0; padding: 20px 0; background: #ffffff; border-radius: 8px;">
                  <div style="display: flex; gap: 20px; min-width: min-content; padding: 0 20px;">
                    <div style="flex-shrink: 0; width: 442px;">
                      <img src="img/pcb.1.2.inverting_schmitt.png" alt="Schmitt trigger inversor" style="width: 100%; border-radius: 4px; border: 2px solid #003366;">
                      <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 8px;">Configuración inversora con ruido</p>
                    </div>
                    <div style="flex-shrink: 0; width: 442px;">
                      <img src="img/pcb.1.3.non-inverting_schmitt.png" alt="Schmitt trigger no inversor" style="width: 100%; border-radius: 4px; border: 2px solid #003366;">
                      <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 8px;">Configuración no inversora</p>
                    </div>
                    <div style="flex-shrink: 0; width: 442px;">
                      <img src="img/pcb.1.4.non-hysteretic_comparator.png" alt="Comparador sin histéresis" style="width: 100%; border-radius: 4px; border: 2px solid #003366;">
                      <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 8px;">Sin histéresis: oscilaciones en el umbral</p>
                    </div>
                  </div>
                </div>

                <p>Las waveforms demuestran la efectividad del diseño: mientras el comparador sin histéresis presenta múltiples conmutaciones indeseadas al cruzar el umbral, ambas configuraciones con Schmitt trigger mantienen una salida limpia y estable incluso con señal de entrada ruidosa.</p>

                <h3>2. Temporización Analógica y Lógica de Alarma</h3>

                <p>El subsistema de temporización integra un temporizador 555, un circuito anti-latch personalizado y lógica de habilitación de alarma para garantizar que las señales de error se activen solo en condiciones válidas.</p>

                <div style="margin: 30px 0; text-align: center;">
                  <img src="img/pcb.5.1.circuit.png" alt="Circuito completo de temporización" style="max-width: 100%; border-radius: 6px; border: 2px solid #003366;">
                  <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 10px;">Circuito completo: temporizador 555, lógica de alarma y conversor latch-a-pulso</p>
                </div>

                <h4>Conversor Latch-a-Pulso</h4>
                <p>Diseño original que resuelve un requerimiento específico: el 555 necesita un flanco, no una señal sostenida. Implementado con un LM358 y capacitor de 5 µF, genera un pulso corto en cada flanco de subida de la entrada, ignorando su estado posterior. Se utiliza dos veces en el sistema (para verificación de apertura y cierre de paneles).</p>

                <div style="margin: 30px 0; text-align: center;">
                  <img src="img/pcb.5.3.latch-to-pulse(annotated).png" alt="Conversor latch-a-pulso" style="max-width: 100%; border-radius: 6px; border: 2px solid #003366;">
                  <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 10px;">Conversor latch-a-pulso anotado - convierte señal continua en pulso de activación</p>
                </div>

                <h4>Comportamiento del Temporizador 555</h4>
                <p>El 555 opera con salida activa baja. La simulación muestra dos modos de activación: mediante señal de reset (indeseada, que requiere filtrado) y mediante un trigger válido tras el período de temporización.</p>

                <div style="margin: 30px 0; text-align: center;">
                  <img src="img/pcb.5.5.out(annotated).png" alt="Salida del temporizador 555" style="max-width: 100%; border-radius: 6px; border: 2px solid #003366;">
                  <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 10px;">Activación por reset (izquierda) y por trigger válido (derecha)</p>
                </div>

                <h4>Lógica de Habilitación de Alarma</h4>
                <p>Implementada con un opamp como comparador, actúa como compuerta AND analógica para evitar falsos positivos durante el reset del sistema. Solo cuando el trigger está activo (bajo) <em>y</em> el reset está inactivo (alto) se genera la señal de alarma.</p>

                <div style="margin: 30px 0; text-align: center;">
                  <img src="img/pcb.5.7.alarm_logic(annotated).png" alt="Lógica de habilitación de alarma" style="max-width: 100%; border-radius: 6px; border: 2px solid #003366;">
                  <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 10px;">Lógica AND analógica: alarma solo con trigger activo y reset inactivo</p>
                </div>

                <h3>3. Latch Analógico con Transistores NPN</h3>

                <p>Latch simple implementado con dos transistores NPN cruzados que mantiene un estado estable (ON/OFF) hasta recibir una señal de conmutación opuesta. Se utiliza para retener el estado de despliegue de los paneles solares.</p>

                <div style="margin: 30px 0; text-align: center;">
                  <img src="img/pcb.2.1.circuit.jpeg" alt="Circuito latch con transistores NPN" style="max-width: 100%; border-radius: 6px; border: 2px solid #003366;">
                  <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 10px;">Latch analógico: configuración cruzada de transistores NPN para retención de estado</p>
                </div>

                <div style="overflow-x: auto; margin: 30px 0; padding: 20px 0; background: #ffffff; border-radius: 8px;">
                  <div style="display: flex; gap: 20px; min-width: min-content; padding: 0 20px; justify-content: center;">
                    <div style="flex-shrink: 0; width: 494px;">
                      <img src="img/pcb.2.2.q1(on).png" alt="Latch con Q1 activo" style="width: 100%; border-radius: 4px; border: 2px solid #003366;">
                      <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 8px;">Estado 1: Q1 activo, Q2 inactivo - salida estable</p>
                    </div>
                    <div style="flex-shrink: 0; width: 494px;">
                      <img src="img/pcb.2.3.q2(off).png" alt="Latch con Q2 activo" style="width: 100%; border-radius: 4px; border: 2px solid #003366;">
                      <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 8px;">Estado 2: Q2 activo, Q1 inactivo - conmutación limpia</p>
                    </div>
                  </div>
                </div>

                <p>El latch responde correctamente a pulsos de entrada, manteniendo el último estado activado sin consumo adicional hasta la siguiente conmutación. La simulación confirma una transición estable entre estados sin oscilaciones.</p>

                <h3>4. Conmutación de Fuentes con MOSFET</h3>

                <p>Etapa de control para activación de relays mediante MOSFETs, que gestionan la selección entre fuente solar y baterías. La simulación se centra en el comportamiento del MOSFET, ya que el relay opera como carga inductiva controlada.</p>

                <div style="margin: 30px 0; text-align: center;">
                  <img src="img/pcb.4.1.circuit.png" alt="Circuito de conmutación con MOSFET" style="max-width: 100%; border-radius: 6px; border: 2px solid #003366;">
                  <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 10px;">Driver MOSFET con protección y señal de control desde comparador</p>
                </div>

                <div style="margin: 30px 0; text-align: center;">
                  <img src="img/pcb.4.3.switching(annotated).png" alt="Waveform de conmutación anotada" style="max-width: 100%; border-radius: 6px; border: 2px solid #003366;">
                  <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 10px;">Conmutación limpia: señal de mosfets para relé solar (rojo) y batería (azul) sin retrasos significativos</p>
                </div>

                <p>El MOSFET CSD17577Q5A responde eficientemente a la señal de control, con tiempos de conmutación rápidos y sin oscilaciones. La simulación valida que el diseño maneja correctamente la transición entre fuentes de alimentación.</p>

                <h3>5. Simulación de Sensor de Orientación con LDR</h3>

                <p>Simulación del circuito de detección de orientación que utiliza un LDR (Light Dependent Resistor) en configuración de divisor resistivo seguido de un comparador. Para modelar la variación de resistencia del LDR en LTSpice, se implementó una solución creativa: una fuente de voltaje PWL variable que controla el valor de una resistencia mediante la expresión <code>R = V(VR) * 100000</code>, simulando efectivamente una resistencia que cambia en el tiempo.</p>

                <div style="margin: 30px 0; text-align: center;">
                  <img src="img/pcb.3.1.circuit.png" alt="Circuito sensor LDR con resistencia variable simulada" style="max-width: 100%; border-radius: 6px; border: 2px solid #003366;">
                  <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 10px;">Divisor resistivo con "LDR variable" (fuente PWL controlada) y etapa comparadora</p>
                </div>

                <div style="margin: 30px 0; text-align: center;">
                  <img src="img/pcb.3.3.waveform(annotated).png" alt="Waveform anotada de detección" style="max-width: 100%; border-radius: 6px; border: 2px solid #003366;">
                  <p style="text-align: center; font-size: 0.9em; color: #555; margin-top: 10px;">Respuesta del sistema: voltaje del divisor (variable, azul) y salida del comparador (escalón, rojo)</p>
                </div>

                <p>La simulación confirma que el circuito detecta correctamente cuando la iluminación (simulada como resistencia variable) cruza el umbral establecido, generando una transición limpia en la salida del comparador.</p>
            </div>
        </main>
        <div id="footer-container"></div>
    </div>
    <script>
        fetch('components/footer-general.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer-container').innerHTML = data;
            });
    </script>
</body>
</html>
